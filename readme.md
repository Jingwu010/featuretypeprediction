**Jingwu Xu** 

## Project:

Build a training data creation framework, say, using Snorkel for automatic ML schema extraction from data files for predicting feature type based on attribute name, sample values, and statistics. Compare with recent work on manually labeled dataset.

## Meeting:

Wednesday 1.30pm.

## Rules for assigning labels

|            Category             | Case                                                         |
| :-----------------------------: | :----------------------------------------------------------- |
|   **Usable directly numeric**   | **Case a.** Should be usable directly as a number feature for ML |
|   **Usable with extraction**    | **Case b.** A number present along with unit of measure string<br/>**Case c.** A text corpus with semantic meaning <br/>**Case d.** Date or time stamp |
| **Usable directly categorical** | **Case e.** Yes/No type values, including binary 0/1 answers <br/>**Case f.** Country names, city names, food type names, and other object type names that are not cases *l* or *m* below <br/>**Case g.** Coded numbers that are short forms of names in case *f* that are not cases *l* or *m* below <br/>**Case h.** Short names that indicate type from a known finite set/domain that are not case *l* below <br/>**Case i.** Handful of coded numbers that repeat themselves but arbitrary arithmetic on them is not meaningful and that are also not case *l* or *n* below <br/>**Case j.** A coded number that encodes real-world entities from a known finite domain set |
|          **Unusable**           | **Case k.** A number indicating the position of a record in its dataset table <br/>**Case** **l.** An attribute that is likely the primary key in its dataset table |
|      **Context dependent**      | **Case m.** Person name, company name, or any entity name that is not generic <br/>**Case** **n.** Coded numbers or id for people, company, or other entity names from case m that are not cases g, i, j, k, or l above. |



## Questions:

**Regarding to the problem:**

1. If we use only the attribute name, will using existing language model be more helpful than designing labeling functions?
2. If we want to use features rather than attribute name, like, mean, std, #unique, etc. (We are already doing data preprocessing here (feature extraction)), what are the differences between feeding the extracted data into ML model like Decision Tree, compared to designing labeling functions upon the extracted features?
3. Can we add more features from attribute value field to improve the accuracy? like the length of each value, etc
4. Many of the textual values do not have mean, std, which makes the extracted feature unlikely to represent all data samples.



**Regarding to Snorkel:**

1. If two labeling functions give two different labels, how does Snorkel deal with it? I assume the Snorkel model only generates one label for each data point. 'Once the model is trained, we can combine the outputs of the LFs into a single, noise-aware training label set for our extractor'

2. Need more explanation on labeling function comparison generated by Snorkel? How do I tell which labeling function is better than the other? how do I tell which labeling function takes effect when doing the prediction.

   <img src='./imgs/lf_stats.png'>

   <img src='./imgs/snorkel_ex.png'>

**Regarding to data:**

1. What does it mean when predicting '1,2,3,4,5'?

   ```
   1062	68.146296	hm15life	NaN	6540	a	350	9597	Usable directly numeric	NaN	NaN	...	NaN	NaN	1	5	7	2	1265.812302	NaN	Context_specific	1
   1063	68.219235	hm15owner	NaN	6547	a	350	9597	Usable directly numeric	NaN	NaN	...	NaN	NaN	3	1	2	0	0.486729	NaN	Context_specific	3
   ```

   ```python
   print(*np.unique(pred),sep='\n')
       
   > 1
   > 2
   > 3
   > 4
   > 5
   > Context_specific
   > Unusable
   > Usable directly categorical
   > Usable directly numeric
   > Usable with extraction
   ```

   

According the provided files, I noticed that there exists a lot of inconsistence. X-axis represents predicted label, Y-axis represents actual labels. And the Confusion Matrix is:

<img src='./imgs/cm_plot.png'><img src='./imgs/cmn_plot.png'>

1. Most problematic field is `context specific`, which is largely misclassified into `usable directly numeric`.

2. Record `208-247` attribute name with 'xxxid' are classified into `usable directly numeric`

3. Record `1041-1079` classified into `numbers (1-5)?`

4. What does columns means?

   ```
   'Unnamed: 2',
   'Unnamed: 9',
   'check',
   ```

## Progress:

**1/30:**

+ walk through Snorkel tutorials
+ play around with data and get some insights
+ looking for related papers, **suggestions from professor?**